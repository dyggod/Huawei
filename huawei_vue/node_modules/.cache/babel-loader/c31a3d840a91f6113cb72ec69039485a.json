{"remainingRequest":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\babel-loader\\lib\\index.js!F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\dyg\\myproject\\myHuawei\\huawei_vue\\src\\components\\cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\src\\components\\cart.vue","mtime":1561366540000},{"path":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\dyg\\myproject\\myHuawei\\huawei_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      output: {\n        cart: [],\n        product: []\n      },\n      priceAll: 0\n    };\n  },\n  props: [\"uid\"],\n  mounted: function mounted() {\n    this.load();\n  },\n  methods: {\n    //全选按钮\n    selectAll: function selectAll(e) {\n      //获取当前按钮的选中状态\n      var rs = e.target.checked; //获取购物车数组列表，创建循环\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.$refs.ni[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          item.checked = rs; //改变当前商品的选中状态\n\n          console.log(this.$refs.ni[0].checked);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      ;\n    },\n    load: function load() {\n      var _this = this;\n\n      //加载页面函数\n      var uid = sessionStorage.uid; //获得当前登录状态的用户的uid\n\n      if (uid) {\n        //如果存在登录用户uid\n        var src = \"http://127.0.0.1:3000/pro/cart\"; //var obj={uid:this.uid};\n\n        this.axios.get(src, {\n          params: ''\n        }).then(function (result) {\n          _this.output = result.data; //循环遍历output.product,为每一项添加cb属性\n\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = _this.output.product[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var item = _step2.value;\n              item.cb = false;\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n\n          ;\n          console.log(_this.output);\n        });\n      } else {\n        //如果不存在\n        alert(\"请先登录\");\n        this.$router.push('/');\n      }\n\n      ; //计算出总价\n\n      for (var i = 0; i < this.output.cart.length; i++) {\n        this.priceAll += this.output.cart[i].count * this.output.product[i].price;\n      }\n\n      ;\n      console.log(this.priceAll);\n    },\n    addCount: function addCount(e) {\n      var _this2 = this;\n\n      //加按钮事件\n      console.log(e.target.dataset.cid); //console.log(this.$refs.count.value);\n\n      var cid = e.target.dataset.cid; //自定义属性获得所在商品购物车的cid和count\n\n      var count = e.target.dataset.count;\n      this.axios.get('http://127.0.0.1:3000/pro/cartadd', {\n        params: {\n          cid: cid,\n          count: count\n        }\n      }).then(function (result) {\n        //console.log(result);\n        _this2.load(); //重新加载页面\n\n      });\n    },\n    subCount: function subCount(e) {\n      var cid = e.target.dataset.cid;\n      var count = e.target.dataset.count;\n\n      if (count > 1) {\n        //只有当现在的数量大于一时,才进行减量的修改\n        this.axios.get('http://127.0.0.1:3000/pro/cartsub', {\n          params: {\n            cid: cid,\n            count: count\n          }\n        }).then(function (result) {//console.log(result);\n        });\n      }\n\n      this.load();\n    },\n    //删除一个商品\n    delCart: function delCart(e) {\n      var _this3 = this;\n\n      //弹出提示消息\n      confirm('是否删除'); // console.log(\"cancel\")\n\n      if (\"cancel\" == true) {\n        //如果选择取消\n        return; //那么停止执行\n      } else {\n        //拿到cid\n        var cid = e.target.dataset.cid;\n        var obj = {\n          cid: cid //发送请求，删除数据库购物车数据\n\n        };\n        this.axios.get('http://127.0.0.1:3000/pro/delCart', {\n          params: obj\n        }).then(function (result) {\n          console.log(result);\n\n          if (result.data == 200) {\n            _this3.load();\n          } else {\n            alert('删除失败');\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <section>\r\n        <!-- 分为三层 top main bottom -->\r\n        <div class=\"top\">\r\n            <div>\r\n                <span>购物车</span>\r\n                <p>\r\n                    已选\r\n                    <span>{{output.cart.length}}</span>\r\n                    件商品\r\n                    &nbsp; &nbsp; &nbsp;\r\n                    合计(不含运费):\r\n                    <span>{{priceAll}}元</span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class=\"main\">\r\n            <div class=\"title\">\r\n                <div class=\"checkAll\">\r\n                    <input type=\"checkbox\" @change=\"selectAll\">\r\n                    <span>全选</span>\r\n                </div>\r\n                <div class=\"product\">\r\n                    商品\r\n                </div>\r\n                <div >单价</div>\r\n                <div class=\"number\">数量</div>\r\n                <div class=\"priceAll\">金额</div>\r\n                <div class=\"del\">操作</div>\r\n            </div>\r\n            <div class=\"cart\" v-for=\"(item,index) of output.product\" :key=\"index\">\r\n                <div class=\"checkAll\">\r\n                    <input type=\"checkbox\"  ref=\"ni\">\r\n                </div>\r\n                <div class=\"product\">\r\n                    <img :src=\"item.show_img\" alt=\"\">\r\n                    <div>\r\n                         <a href=\"#\">{{item.title}}</a>\r\n                        <p class=\"mt-2\">规格：{{item.spec}}</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"price\">\r\n                    <span>华为专项价:</span>\r\n                    <span>￥{{item.price}}</span>\r\n                </div>\r\n                <div>\r\n                    <button @click=\"subCount\" :data-cid=\"output.cart[index].cid\" :data-count=\"output.cart[index].count\">-</button>\r\n                    <input style=\"width:40px;height:40px;text-align:center;outline:none\" type=\"text\" :value=\"output.cart[index].count\" ref=\"count\" readonly >\r\n                    <button @click=\"addCount\" :data-cid=\"output.cart[index].cid\" :data-count=\"output.cart[index].count\">+</button>\r\n                </div> \r\n                <div>\r\n                    {{ item.price*output.cart[index].count }}</div>\r\n                <div class=\"del\" @click=\"delCart\" :data-cid=\"output.cart[index].cid\">\r\n                    删除\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"bottom\">\r\n            <div class=\"title\">\r\n                <div class=\"checkAll\">\r\n                    <input type=\"checkbox\">\r\n                    <span>全选</span>\r\n                </div>\r\n                <p>\r\n                    已选\r\n                    <span>0</span>\r\n                    件商品\r\n                    &nbsp; &nbsp; &nbsp;\r\n                    合计(不含运费):\r\n                    <span>0.00元</span>\r\n                </p>\r\n                <a href=\"JavaScript:;\">去结算</a>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            output:{\r\n                cart:[\r\n                    \r\n                ],\r\n                product:[\r\n                    \r\n                ]\r\n            },\r\n            priceAll:0\r\n        }\r\n    },\r\n    props:[\r\n        \"uid\"\r\n    ],\r\n    mounted(){\r\n        this.load();\r\n    },\r\n    methods: {\r\n        //全选按钮\r\n        selectAll(e){\r\n            //获取当前按钮的选中状态\r\n            var rs=e.target.checked;\r\n            //获取购物车数组列表，创建循环\r\n            for(let item of this.$refs.ni){\r\n                item.checked=rs; //改变当前商品的选中状态\r\n                console.log(this.$refs.ni[0].checked)\r\n            };\r\n        },\r\n\r\n        load(){  //加载页面函数\r\n            var uid=sessionStorage.uid;  //获得当前登录状态的用户的uid\r\n            if(uid){    //如果存在登录用户uid\r\n            var src=\"http://127.0.0.1:3000/pro/cart\";\r\n            //var obj={uid:this.uid};\r\n            this.axios.get(src,{params:''}).then(result=>{\r\n                    this.output=result.data;\r\n                    //循环遍历output.product,为每一项添加cb属性\r\n                    for(let item of this.output.product){\r\n                        item.cb=false;\r\n                    };\r\n                    console.log(this.output)\r\n                })\r\n            }else{  //如果不存在\r\n                alert(\"请先登录\");\r\n                this.$router.push('/');\r\n            };\r\n            //计算出总价\r\n            for(var i=0;i<this.output.cart.length;i++){\r\n                this.priceAll+=this.output.cart[i].count*this.output.product[i].price;\r\n            };\r\n            console.log(this.priceAll);\r\n\r\n        },\r\n        addCount(e){  //加按钮事件\r\n            console.log(e.target.dataset.cid);\r\n            //console.log(this.$refs.count.value);\r\n            var cid=e.target.dataset.cid;   //自定义属性获得所在商品购物车的cid和count\r\n            var count=e.target.dataset.count;\r\n            this.axios.get('http://127.0.0.1:3000/pro/cartadd',{params:{cid:cid,count:count}}).then(result=>{\r\n               //console.log(result);\r\n               this.load();  //重新加载页面\r\n            })\r\n        },\r\n        subCount(e){\r\n            var cid=e.target.dataset.cid;\r\n            var count=e.target.dataset.count;\r\n            if(count>1){  //只有当现在的数量大于一时,才进行减量的修改\r\n                this.axios.get('http://127.0.0.1:3000/pro/cartsub',{params:{cid:cid,count:count}}).then(result=>{\r\n                //console.log(result);\r\n                })\r\n            }\r\n            this.load();\r\n        },\r\n        //删除一个商品\r\n        delCart(e){\r\n            //弹出提示消息\r\n            confirm('是否删除');\r\n            // console.log(\"cancel\")\r\n            if(\"cancel\"==true){ //如果选择取消\r\n                return;   //那么停止执行\r\n            }else{\r\n                //拿到cid\r\n                var cid=e.target.dataset.cid;\r\n                var obj={cid:cid}\r\n                //发送请求，删除数据库购物车数据\r\n                this.axios.get('http://127.0.0.1:3000/pro/delCart',{params:obj}).then(result=>{\r\n                    console.log(result);\r\n                    if(result.data==200){\r\n                        this.load();\r\n                    }else{\r\n                        alert('删除失败')\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    /* 总体 */\r\n    section>div{\r\n        width: 1200px;\r\n        margin:0 auto;\r\n    }\r\n    /* div.top */\r\n    div.top>div{\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    div.top>div>span{\r\n        font-size: 20px;\r\n        color:#000;\r\n        font-weight: bolder;\r\n    }\r\n    div.top>div>p{\r\n        font-size: 12px;\r\n        margin: 0;\r\n        line-height: 30px;\r\n    }\r\n    div.top>div>p>span{\r\n        color:#ff8486;\r\n        font-size: 18px;\r\n    }\r\n    /* div.main */\r\n    div.main>div.title{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        border-top: 1px solid #ccc;\r\n    }\r\n    div.main>div.title>div{\r\n        height:37px;\r\n        width: 175px;\r\n        background: #f9f9f9;\r\n        line-height: 37px;\r\n    }\r\n    div.main>div.title>div.checkAll{\r\n        width: 50px;\r\n    }\r\n    div.main>div.title>div.product{\r\n        width:450px;\r\n    }\r\n    div.main>div.cart{\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    div.main>div.cart>div{\r\n        height: 115px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n         width: 175px;\r\n    }\r\n    div.main>div.cart>div.checkAll{\r\n        width: 50px;\r\n    }\r\n    div.main>div.cart>div.product{\r\n        width:450px;\r\n        font-size: 12px;\r\n        padding-left: 20px;\r\n    }\r\n    div.main>div.cart>div.product>img{\r\n        /* width: 80px; */\r\n        height: 80px; \r\n    }\r\n    div.main>div.cart>div.product a{\r\n        text-decoration: none;\r\n        color: #000;\r\n    }\r\n    div.main>div.cart>div.product>div{\r\n       text-align: left;\r\n       margin-left: 10px;\r\n       width: 340px;\r\n    }\r\n    div.main>div.cart>div>button{\r\n        width:30px;\r\n        height:40px\r\n    }\r\n    div.main>div.cart>div.price{\r\n        flex-flow: column;\r\n    }\r\n    div.main>div.cart>div.price>span:first-child{\r\n        color: #ff8486;\r\n    }\r\n    div.main>div.cart>div.del{\r\n        cursor: pointer;\r\n    }\r\n    /* div.bottom */\r\n    div.bottom>div.title{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        background: #f9f9f9;\r\n        line-height: 40px;\r\n    }\r\n    \r\n    div.bottom>div.title>p{\r\n        margin-left: 550px;\r\n        margin-bottom: 0;\r\n    }\r\n     div.bottom>div.title>a{\r\n         display: inline-block;\r\n         width: 150px;\r\n         height:40px;\r\n         color:#fff;\r\n         background-color: #74c7ff;\r\n         border-radius: 5px;\r\n         text-decoration: none;\r\n     }\r\n</style>\r\n"],"sourceRoot":"src/components"}]}